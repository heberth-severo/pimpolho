<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../assets/favicon.svg" type="image/x-icon" > 

    <title>Página Principal Estudante</title>
    <!-- Style -->
    <link rel="stylesheet" href="../style/reset.css">
    <link rel="stylesheet" href="../style/estilo.css">
    <link rel="stylesheet" href="../style/estilo_acesso.css">
    <link rel="stylesheet" href="../style/responsive.css">



    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--  -->
    <script src="../js/funcionalidades.js"></script>

</head>

<body>

    <div class="container-fluid">
        <header class="headerAcesso ">
            <div class="img-logomini">
                <img src="../assets/logoMini.svg" alt="imagem da logo">
            </div>
            <div class="sideBar">
                <div class="testeBotao text-end m-2 ">
                    <button class="btn " type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
                        <img src="../assets/menu.svg" alt="">
                    </button>
                </div>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="nameAluno">
                    <div class="offcanvas-header">
                        <div class="tituloSidebar ms-5">
                            <h5 id="nameAluno">Nome</h5>
                        </div>
                        <button type="button" class=" text-reset m-3" data-bs-dismiss="offcanvas" aria-label="Close">
                            <img src="../assets/fechar.svg" alt="fechar">
                        </button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="text-center">
                            <li>Ano/Turma: 3º Ano</li>
                            <li id="jogMemoria" class="mt-3"></li>
                            <li id="jogForca"></li>
                            <li id="jog7Erros"></li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <main class="containerJogos">
            <div class="card-container">
                <div class="cardJogo ">
                    <a href="../jogodamemoria/jogo.html">
                        <div class="cardConteudo">
                            <div class="cardConteudoJogo">
                                <img src="../assets/iconeJogo.svg" alt="">
                            </div>
                        </div>
                    </a>
                    <div class="card-titulo">
                        <p>Jogo da</p>
                        <p>Memória</p>
                    </div>
                </div>

                <div class="cardJogo">
                    <a href="../jogodaforca/jogoForca.html">
                        <div class="cardConteudo">
                            <div class="cardConteudoJogo">
                                <img src="../assets/hangman-game.png" alt="">
                            </div>
                        </div>
                    </a>
                    <div class="card-titulo">
                        <p>Jogo da</p>
                        <p>Forca</p>
                    </div>
                </div>

                <div class="cardJogo">
                    <a href="../jogodos7erros/jogo7erros.html">
                        <div class="cardConteudo">
                            <div class="cardConteudoJogo">
                                <img src="../assets/canva.png" alt="">
                            </div>
                        </div>
                    </a>
                    <div class="card-titulo">
                        <p>Jogo dos</p>
                        <p>7 Erros</p>
                    </div>
                </div>
            </div>
        </main>
        <footer class="mt-5 mb-3 ">
            <div class="footerPaginaAcessar" >
                <div class="buttonsFooter ">
                    <div class="buttonDica ms-2">
                        <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTop" aria-controls="offcanvasTop">
                            <img src="../assets/iconeLamp.svg" alt="icone de uma lampada">
                        </button>
                        <div class="offcanvas offcanvas-top" tabindex="-1" id="offcanvasTop" aria-labelledby="offcanvasTopLabel">
                            <div class="offcanvas-header">
                              <h3 id="offcanvasTopLabel" class="m-3 h2">Intruções de como jogar:</h3>
                              <button class="btn-close text-reset h2" data-bs-dismiss="offcanvas" aria-label="Close">X</button>
                            </div>
                            <div class="offcanvas-body ms-4 h6 ">
                                - Para jogar o Jogo da Memória, clique no primeiro card.<br>
                                - Para jogar o Jogo da Forca, clique no segundo card.<br>
                                - Para jogar o Jogo dos 7 Erros, clique no terceiro card.
                            </div>
                        </div>
                    </div>
                    <div class="buttonSom ms-2">
                        <audio id="gameAudio" src="../assets/morning-funny-beat.mp3" loop></audio>
                        <button id="btnSom" onclick="toggleAudio()"><img src="../assets/iconeSound.svg" alt="icone de audio"></button>
                    </div>
                    <div class="buttonHome ms-2">
                        <a href="#"><img src="../assets/iconeHome.svg" alt="icone de uma casa"></a>
                    </div>
                </div>
                <div class="logout">
                    <a href="../index.html"><img src="../assets/logout.png" alt="sair"></a>
                </div>
            </div>
        </footer>
    </div>

    <script>
         $('#nameAluno').text(localStorage.getItem('nome_estudante'))
         let jogos = JSON.parse(localStorage.getItem('nome_jogo'))
         let totalPontos = 0;

         for(let jogo of jogos){
            // Somar pontos ao total
            totalPontos += parseInt(jogo.pontos || 0);

            if(jogo.nomejogo.includes('memória') || jogo.nomejogo.includes('Memória')){
                $('#jogMemoria').text(jogo.nomejogo+ ' : ' + jogo.pontos)
            }
            if(jogo.nomejogo.includes('Forca') || jogo.nomejogo.includes('forca')){
                $('#jogForca').text(jogo.nomejogo+ ' : ' + jogo.pontos)
            }
            if(jogo.nomejogo.toLowerCase().includes('7 erros')){
                $('#jog7Erros').text(jogo.nomejogo+ ' : ' + jogo.pontos)
            }
         }

         // Adicionar o total de pontos
         $('.offcanvas-body ul').append('<li class="mt-3 fw-bold">Total de Pontos: ' + totalPontos + '</li>');

         function toggleAudio() {
            const audio = document.getElementById('gameAudio');
            if (audio.paused) {
                audio.play();
                document.getElementById('btnSom').classList.add('playing');
            } else {
                audio.pause();
                document.getElementById('btnSom').classList.remove('playing');
            }
         }
    </script>
</body>
</html>
