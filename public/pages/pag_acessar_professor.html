<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Acessar Professor</title>
    <link rel="icon" href="../assets/favicon.svg" type="image/x-icon" >
    <!-- Style -->
    <link rel="stylesheet" href="../style/reset.css">
    <link rel="stylesheet" href="../style/estilo.css">
    <link rel="stylesheet" href="../style/estilo_acesso.css">
    <link rel="stylesheet" href="../style/responsive.css">



    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--  -->
    <script src="../js/funcionalidades.js"></script>
</head>

<body>

    <div class="container-fluid">
        <header class="headerAcesso ">
            <div class="img-logomini">
                <img src="../assets/logoMini.svg" alt="imagem da logo">
            </div>
            <div class="sideBar">
                <div class="testeBotao text-end m-2 ">
                    <button class="btn " type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
                        aria-controls="offcanvasRight">
                        <img src="../assets/menu.svg" alt="">
                    </button>
                </div>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="nameAluno">
                    <div class="offcanvas-header">
                        <div class="tituloSidebar ms-5">
                            <h5 id="nameProfessor">Nome</h5>
                        </div>
                        <button type="button" class=" text-reset m-3" data-bs-dismiss="offcanvas" aria-label="Close">
                            <img src="../assets/fechar.svg" alt="fechar">
                        </button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="text-center">
                            <li id="turmaProfessor">Ano/Turma: </li>
                            <hr width="90%">
                        </ul>
                    </div>
                </div>
            </div>
        </header>

        <main class="containerListaAlunos ">
            <div id="relatorio">
                <h3 class="">Relatório de pontos por jogo</h3>
                <label for="nomeJogo">Nome do jogo:</label>
                <div style="display: flex; align-items: center;">
                    <select id="nomeJogo" class="form-select">
                        <option value="">Selecione um jogo</option>
                        <option value="2">Jogo da Memória</option>
                        <option value="1">Jogo da Forca</option>
                        <option value="3">Jogo dos 7 Erros</option>
                        <option value="4">Jogo Complete Palavras</option>
                    </select>
                    <button onclick="consultarJogo()" class="m-2">Filtrar</button>
                    <a href="javascript:void(0);" onclick="atualizar()" class="m-2"><img src="../assets/atualizar.svg" alt="recarregar"></a>
                </div>
            </div>
            <table class="table tableRelatorio">
                <thead>
                    <tr>
                        <th scope="col">Nome do Aluno</th>
                        <th scope="col" class="me-2">Nome do Jogo</th>
                        <th scope="col"  class="text-center">Pontos</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dados dos alunos serão inseridos aqui dinamicamente -->
                </tbody>
            </table>
        </main>

        <footer class="mt-5 mb-3 " id="buttonProf">
            <div class="footerPaginaAcessar">
                <div class="buttonsFooter ">
                    <div class="buttonDica ms-2">
                        <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasTop" aria-controls="offcanvasTop">
                            <img src="../assets/iconeLamp.svg" alt="icone de uma lampada">
                        </button>
                        <div class="offcanvas offcanvas-top" tabindex="-1" id="offcanvasTop" aria-labelledby="offcanvasTopLabel">
                            <div class="offcanvas-header">
                              <h3 id="offcanvasTopLabel" class="m-3 h2">Como utilizar o filtro de busca:</h3>
                              <button class="btn-close text-reset h2" data-bs-dismiss="offcanvas" aria-label="Close">X</button>
                            </div>
                            <div class="offcanvas-body ms-4 h6 ">
                                - Selecione um jogo no menu suspenso para filtrar os resultados por jogo específico.<br>
                                - Clique no botão "Filtrar" para aplicar o filtro selecionado.<br>
                                - Use o botão de atualizar para limpar o filtro e mostrar todos os resultados novamente.<br>
                                - A tabela mostrará o nome do aluno, o jogo jogado e a pontuação obtida.
                            </div>
                        </div>
                    </div>
                    <div class="buttonSom ms-2">
                        <audio id="gameAudio" src="../assets/morning-funny-beat.mp3" loop></audio>
                        <button id="btnSom" onclick="toggleAudio()"><img src="../assets/iconeSound.svg" alt="icone de audio"></button>
                    </div>
                </div>
                <div class="logout">
                    <a href="../index.html"><img src="../assets/logout.png" alt="sair"></a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Carregar informações do professor quando a página carrega
        document.addEventListener('DOMContentLoaded', function() {
            // Obter informações do professor do localStorage
            const nomeProfessor = localStorage.getItem('nome_professor');
            const idTurmaProfessor = localStorage.getItem('id_turma_professor');

            // Exibir o nome do professor
            if (nomeProfessor) {
                document.getElementById('nameProfessor').textContent = nomeProfessor;
            }

            // Exibir a turma do professor
            if (idTurmaProfessor) {
                document.getElementById('turmaProfessor').textContent = 'Ano/Turma: ' + idTurmaProfessor;
            }

            // Se não houver informações do professor, redirecionar para a página de login
            if (!nomeProfessor || !idTurmaProfessor) {
                alert('Sessão expirada ou inválida. Por favor, faça login novamente.');
                window.location.href = '../index.html';
            } else {
                // Carregar alunos da turma do professor
                carregarAlunosDaTurma();
            }
        });

        function toggleAudio() {
            const audio = document.getElementById('gameAudio');
            if (audio.paused) {
                audio.play();
                document.getElementById('btnSom').classList.add('playing');
            } else {
                audio.pause();
                document.getElementById('btnSom').classList.remove('playing');
            }
        }

        // Função para atualizar a página
        function atualizar() {
            // Limpar a tabela
            $('table.tableRelatorio tbody').empty();

            // Limpar o campo de filtro
            $('#nomeJogo').val('');

            return false; // Prevenir comportamento padrão do link
        }
    </script>
</body>

</html>
